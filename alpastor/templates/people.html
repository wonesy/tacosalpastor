{% extends 'base_generic.html' %}

{% load static %}

<!-- Adding additional CSS/JS scripts -->
{% block additional_links %}
    <link rel="stylesheet" href="{% static 'css/people.css' %}">
{% endblock %}

<!-- Main content for people page -->
{% block content %}
<div class="container">
    <div class="row filter-container">
        <div class='col-sm-11 col-md-11 col-lg-11'>
            <input class="search-bar" id="searcher" type="text" placeholder="Search">
        </div>
        <div class='col-sm-1 col-md-1 col-lg-1'>
            <input type="checkbox" id="ME" align="right">
        </div>
    </div>

    <div class='people-container'>
        <div class="row">
            {%  for student in students %}
                <div class="secondDiv">
                    <div class="col-sm-12 col-md-4 col-lg-3 people-block entryDiv">
                        <div class="people-top">
                            <div class="people-img">
                                <!-- Show student image, if exists, otherwise show default image -->
                                {%  if student.photo_location != "" %}
                                {% with 'image/portraits/'|add:student.photo_location as image_static %}
                                    <img class="center-block" src="{% static image_static %}" alt={{ student.first_name }}>
                                {% endwith %}
                                {% else %}
                                    <img src="{% static 'image/portraits/generic_taco.jpg' %}" alt="Default taco" class="people-img">
                                {% endif %}
                            </div>

                            <div class="people-names">
                                <input hidden value="{{ student.user.get_full_name }}">
                                {{ student.user.get_full_name }} <br>
                                {{ student.country }} <br>
                                {% with 'image/flags/'|add:student.country_code|add:'.jpg' as image_static %}
                                    <img src="{% static image_static %}" alt={{ student.first_name }}>
                                {% endwith %}
                            </div>
                        </div>
                        <div class="people-bot">
                            <div class="people-info">
                                {{ student.user.email }}<br>{{ student.user.external_email }}<br>{{ student.phone }}<br>
                                {{ student.program }}: {{ student.specialization }}<br>[{{ student.classof }}]
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
        <script>
        $("#searcher").on("keyup click input", function () {
            var val = $(this).val();
            if (val.length) {
                $(".secondDiv .entryDiv").hide().filter(function () {
                    return $('input', this).val().toLowerCase().indexOf(val.toLowerCase()) != -1;
                }).show();
            }
            else {
                $(".secondDiv .entryDiv").show();
            }
        });



    </script>
{% endblock %}
